"use strict";(window["garfish-demo"]=window["garfish-demo"]||[]).push([[716,308],{3133:function(T,h,s){s.d(h,{Z:function(){return y}});var o=Object.defineProperty,b=(v,t,A)=>t in v?o(v,t,{enumerable:!0,configurable:!0,writable:!0,value:A}):v[t]=A,u=(v,t,A)=>(b(v,typeof t!="symbol"?t+"":t,A),A);const P=s(7258),w="ywkf_jwt";class y{static setAccessToken(t){P.set(w,t?`${t.token_type} ${t.access_token}`:"",{expires:new Date(t.expires_at*1e3)})}static getAccessToken(t){return P.get(t)}static clearAccessToken(t){P.remove(t)}}u(y,"key",w)},6592:function(T,h,s){s.d(h,{c:function(){return C}});var o=s(7977),b=s.n(o),u=s(6419),P=s(3133),w=Object.defineProperty,y=(O,c,a)=>c in O?w(O,c,{enumerable:!0,configurable:!0,writable:!0,value:a}):O[c]=a,v=(O,c,a)=>(y(O,typeof c!="symbol"?c+"":c,a),a);const t="/api",A="6000";class C{constructor(c){v(this,"instance"),v(this,"baseConfig",{baseURL:t,timeout:Number(A)}),this.instance=b().create(Object.assign(this.baseConfig,c)),this.instance.interceptors.request.use(a=>(a.headers=a.headers||{},a.headers.Authorization=P.Z.getAccessToken("ywkf_jwt")||"",a),a=>Promise.reject(a)),this.instance.interceptors.response.use(a=>{const{data:p}=a,{code:S,message:D}=p;return S===1?(u.Z.error({message:D||"\u672A\u77E5\u9519\u8BEF"}),Promise.reject(p)):S===999?(u.Z.error({message:D||"\u767B\u5F55\u8FC7\u671F, \u8BF7\u91CD\u65B0\u767B\u5F55"}),Promise.reject(p)):S!==0?(u.Z.error({message:D||"\u672A\u5B9A\u4E49\u9519\u8BEF"}),Promise.reject(p)):(S===0&&D&&u.Z.success({message:D}),a.data)},a=>{let p="";switch(a.response.status){case 400:p="\u8BF7\u6C42\u9519\u8BEF(400)";break;case 401:p="\u672A\u6388\u6743\uFF0C\u8BF7\u91CD\u65B0\u767B\u5F55(401)";break;case 403:p="\u62D2\u7EDD\u8BBF\u95EE(403)";break;case 404:p="\u8BF7\u6C42\u51FA\u9519(404)";break;case 408:p="\u8BF7\u6C42\u8D85\u65F6(408)";break;case 500:p="\u670D\u52A1\u5668\u9519\u8BEF(500)";break;case 501:p="\u670D\u52A1\u672A\u5B9E\u73B0(501)";break;case 502:p="\u7F51\u7EDC\u9519\u8BEF(502)";break;case 503:p="\u670D\u52A1\u4E0D\u53EF\u7528(503)";break;case 504:p="\u7F51\u7EDC\u8D85\u65F6(504)";break;case 505:p="HTTP\u7248\u672C\u4E0D\u53D7\u652F\u6301(505)";break;default:p=`\u8FDE\u63A5\u51FA\u9519(${a.response.status})!`}return Promise.reject(a.response)})}request(c){return this.instance.request(c)}get(c,a){return this.instance.get(c,a)}post(c,a,p){return this.instance.post(c,a,p)}put(c,a,p){return this.instance.put(c,a,p)}delete(c,a){return this.instance.delete(c,a)}}var U=new C({})},2716:function(T,h,s){s.r(h);var o=s(959),b=s(1338),u=s(7944),P=s(2477),w=s(3259),y=s(9916),v=s(5355),t=s(887),A=s(3390),C=s(4120),U=s(6258),O=s(9928),c=s(1516),a=s(5034),p=s(7308),S=s(1359),D=Object.defineProperty,r=Object.defineProperties,i=Object.getOwnPropertyDescriptors,e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable,m=(f,g,E)=>g in f?D(f,g,{enumerable:!0,configurable:!0,writable:!0,value:E}):f[g]=E,k=(f,g)=>{for(var E in g||(g={}))n.call(g,E)&&m(f,E,g[E]);if(e)for(var E of e(g))_.call(g,E)&&m(f,E,g[E]);return f},l=(f,g)=>r(f,i(g));const d=s(7258),I="loginParams",R="remember_password",L=()=>{const[f]=b.Z.useForm(),g=(0,a.s0)(),[E,x]=(0,U.Z)(R,{defaultValue:!0}),[G,H]=(0,U.Z)(I,{defaultValue:void 0}),{showCaptcha:B,captchaR:K,login:Z,loginLoading:W}=(0,O.Z)(),{getBasicInfo:z}=(0,c.Z)(),X=M=>{x(M.target.checked)};(0,o.useEffect)(()=>{E&&f.setFieldsValue(G)},[]);const Y=M=>{const N=S.Z.parse(location.search);if(N?.redirect){g(N?.redirect);return}else M.navCode.map(F=>{const j=M.modules.find(J=>J.perarr===F);if(j)j.defaultroute?g(`/${j.path}${j.defaultroute}`):g(`/${j.path}`);else return})},$=()=>{f.validateFields().then(M=>{Z({payload:l(k({},M),{type:"OM"})}).then(N=>{N.loginStatus&&(E&&H({password:M.password,name:M.name}),z({}).then(F=>{Y(F)}))})})};return o.createElement(b.Z,{form:f,name:"OmLoginForm",className:p.default.login__form},o.createElement(b.Z.Item,{name:"name",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u7528\u6237\u540D"}]},o.createElement(u.Z,{placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",size:"large",prefix:o.createElement(A.Z,null)})),o.createElement(b.Z.Item,{name:"password",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801"}]},o.createElement(u.Z.Password,{placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",size:"large",prefix:o.createElement(C.Z,null)})),o.createElement(b.Z.Item,{style:{display:B?"block":"none"}},o.createElement(P.Z,{gutter:24},o.createElement(w.Z,{xs:10,md:10},o.createElement(b.Z.Item,{noStyle:!0,name:"verifycode",rules:[{required:!!B,min:4,max:4,message:"\u8BF7\u586B\u5199\u9A8C\u8BC1\u7801"}]},o.createElement(u.Z,{size:"large",placeholder:"\u9A8C\u8BC1\u7801",onPressEnter:()=>{}}))),o.createElement(w.Z,{xs:14,md:14},o.createElement("img",{width:"130px",height:"32px",src:`/api/main/gateway/captcha?id=${d.get("client")}&_=${K}`,alt:"\u9A8C\u8BC1\u7801"})))),o.createElement("div",{style:{marginBlockEnd:24,display:"flex",justifyContent:"space-between"}},o.createElement(y.Z,{checked:E,onChange:X},"\u8BB0\u4F4F\u5BC6\u7801"),o.createElement("a",{href:"http://u.4399om.com/main/?r=forgetPassword",target:"_blank"},"\u5FD8\u8BB0\u5BC6\u7801")),o.createElement(v.ZP,{type:"primary",loading:W,style:{width:"100%"},onClick:$},"\u767B\u5F55"),o.createElement("div",{className:p.default.other__action}))},V=()=>o.createElement(o.Fragment,null,o.createElement("div",{className:p.default.title},"\u6B22\u8FCE\u6765\u84DD\u4FE1\u7CFB\u7EDF"),o.createElement(t.Z,{className:p.default.accountTab,items:[{key:"om",label:o.createElement("div",{className:p.default.header__title},"OM\u767B\u5F55"),children:o.createElement(L,null)}]}));h.default=V},9928:function(T,h,s){s.d(h,{Z:function(){return i}});var o=s(6497),b=s(3133),u=s(6592);const P=new u.c({});function w(e){return P.post("/main/gateway/login",e)}function y(e){return P.put("/main/gateway/logout",e)}var v=Object.defineProperty,t=Object.defineProperties,A=Object.getOwnPropertyDescriptors,C=Object.getOwnPropertySymbols,U=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable,c=(e,n,_)=>n in e?v(e,n,{enumerable:!0,configurable:!0,writable:!0,value:_}):e[n]=_,a=(e,n)=>{for(var _ in n||(n={}))U.call(n,_)&&c(e,_,n[_]);if(C)for(var _ of C(n))O.call(n,_)&&c(e,_,n[_]);return e},p=(e,n)=>t(e,A(n)),S=(e,n,_)=>new Promise((m,k)=>{var l=R=>{try{I(_.next(R))}catch(L){k(L)}},d=R=>{try{I(_.throw(R))}catch(L){k(L)}},I=R=>R.done?m(R.value):Promise.resolve(R.value).then(l,d);I((_=_.apply(e,n)).next())});const D=s(7258);var i=(0,o.Ue)()(e=>({showCaptcha:!1,loginStatus:!1,captchaR:(Math.random().toString(36).substr(2)+Math.random().toString(36).substr(2)).slice(2,18),loginLoading:!1,login:n=>S(void 0,null,function*(){e({loginLoading:!0});const{payload:_,redirect:m}=n;let k="",l=D.get("client");l||(l=(Math.random().toString(36).substr(2)+Math.random().toString(36).substr(2)).slice(2,18),D.set("client",l));try{const{data:d}=yield w(p(a({},_),{_xsrf:l}));return e({showCaptcha:!1}),b.Z.setAccessToken(d),d?.path!=""&&(k=d?.path),m&&(k=m),e({loginStatus:!0,loginLoading:!1}),{loginStatus:!0}}catch(d){return e({captchaR:(Math.random().toString(36).substr(2)+Math.random().toString(36).substr(2)).slice(2,18)}),d.message==="\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"&&e({showCaptcha:!0}),e({loginStatus:!1,loginLoading:!1}),{loginStatus:!1}}}),logout:()=>S(void 0,null,function*(){yield y({}),D.remove(b.Z.key),D.remove("_xsrf")})}))},1516:function(T,h,s){s.d(h,{Z:function(){return D}});var o=s(6497),b=s(6592);const u=new b.c({});function P(r){return u.get("/main/gateway/copyright",r)}function w(r){return u.get("/main/gateway/profile",r)}function y(r){return u.get("/main/gateway/perarr",r)}function v(r){return u.get("/main/gateway/module",r)}var t=s(6685),A=Object.defineProperty,C=Object.getOwnPropertySymbols,U=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable,c=(r,i,e)=>i in r?A(r,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[i]=e,a=(r,i)=>{for(var e in i||(i={}))U.call(i,e)&&c(r,e,i[e]);if(C)for(var e of C(i))O.call(i,e)&&c(r,e,i[e]);return r},p=(r,i,e)=>new Promise((n,_)=>{var m=d=>{try{l(e.next(d))}catch(I){_(I)}},k=d=>{try{l(e.throw(d))}catch(I){_(I)}},l=d=>d.done?n(d.value):Promise.resolve(d.value).then(m,k);l((e=e.apply(r,i)).next())}),D=(0,o.Ue)()((r,i)=>({year:{s:"0",e:"0"},currentUser:{},navCode:[],microActiveApps:[],siderRoutes:{},getYearData:e=>p(void 0,null,function*(){const{data:n}=yield P(e);r({year:n.year})}),syncGetCurrentUser:e=>{w(e).then(n=>{const{data:_}=n;r({currentUser:_?.user})})},getCurrentUser:e=>p(void 0,null,function*(){const{data:n}=yield w({});return r({currentUser:n?.user}),{currentUser:n?.user}}),syncGetNav:e=>{y(e).then(n=>{const{data:_}=n;r({navCode:_})})},getNav:e=>p(void 0,null,function*(){const{data:n}=yield y(e);return r({navCode:n}),{navCode:n}}),modules:[],syncGetModule:e=>{v(e).then(n=>{const{data:_}=n;r({modules:_})})},getModule:e=>p(void 0,null,function*(){const{data:n}=yield v(e);return r({modules:n}),{modules:n}}),getBasicInfo:e=>p(void 0,null,function*(){try{const n=i().getCurrentUser,_=yield n(e),m=i().getNav,k=yield m(e),l=i().getModule,d=yield l(e);return a(a(a({},_),k),d)}catch(n){return console.log(n),{currentUser:"",navCode:[],modules:[]}}}),layout:{renderFooter:!1,renderHeader:!0,renderSider:!0},setLayout:e=>{const n=i().layout;r({layout:a(a({},n),e)})},setMicroActiveApps:e=>{const{action:n,appInfo:_}=e,m=t.Z.cloneDeep(i().microActiveApps);switch(n){case"add":if(m.find(d=>d.id===_.id))return;m.push(_),r({microActiveApps:m});return;case"delete":const k=m.findIndex(d=>d.id===_.id);if(k===-1)return;m.splice(k,1),r({microActiveApps:m});return;case"update":const l=m.findIndex(d=>d.id===_.id);if(l===-1)return;m[l]=_,r({microActiveApps:m});return}},setSiderRoutes:e=>{const n=i().siderRoutes;r({siderRoutes:a(a({},n),e)})}}))},7308:function(T,h,s){s.r(h),h.default={layoutNew:"src-pages-auth-layout__layoutNew--sqCD8",auth__header:"src-pages-auth-layout__auth__header--CULvM",container:"src-pages-auth-layout__container--Sg6Il",leftBanner:"src-pages-auth-layout__leftBanner--qhOw3",cardHasTab:"src-pages-auth-layout__cardHasTab--ogib2",loginCard:"src-pages-auth-layout__loginCard--wkZNo",title:"src-pages-auth-layout__title--Oz1qY",accountTab:"src-pages-auth-layout__accountTab--PyQck","rta-tabs-tab":"src-pages-auth-layout__rta-tabs-tab--Yo5oS",header__title:"src-pages-auth-layout__header__title--OpU7O",login__form:"src-pages-auth-layout__login__form--cIgGE",other__action:"src-pages-auth-layout__other__action--eRGWx",plain__title:"src-pages-auth-layout__plain__title--s_kuY",idps:"src-pages-auth-layout__idps--ydWem",footer:"src-pages-auth-layout__footer--_33BI",beian:"src-pages-auth-layout__beian--PRS0e",text:"src-pages-auth-layout__text--qzGM7",below:"src-pages-auth-layout__below--BET3b",images:"src-pages-auth-layout__images--RKqlM",layoutNewInMobile:"src-pages-auth-layout__layoutNewInMobile--Rv_8O",mobileLogo:"src-pages-auth-layout__mobileLogo--aHLdg",modules:"src-pages-auth-layout__modules--OzpUv",loginCardInMobile:"src-pages-auth-layout__loginCardInMobile--zef9n"}}}]);
