"use strict";(window["garfish-demo"]=window["garfish-demo"]||[]).push([[711],{3133:function(q,j,_){_.d(j,{Z:function(){return P}});var r=Object.defineProperty,x=(f,m,E)=>m in f?r(f,m,{enumerable:!0,configurable:!0,writable:!0,value:E}):f[m]=E,v=(f,m,E)=>(x(f,typeof m!="symbol"?m+"":m,E),E);const C=_(7258),k="ywkf_jwt";class P{static setAccessToken(m){C.set(k,m?`${m.token_type} ${m.access_token}`:"",{expires:new Date(m.expires_at*1e3)})}static getAccessToken(m){return C.get(m)}static clearAccessToken(m){C.remove(m)}}v(P,"key",k)},6592:function(q,j,_){_.d(j,{c:function(){return T}});var r=_(7977),x=_.n(r),v=_(6419),C=_(3133),k=Object.defineProperty,P=(h,t,s)=>t in h?k(h,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):h[t]=s,f=(h,t,s)=>(P(h,typeof t!="symbol"?t+"":t,s),s);const m="/api",E="6000";class T{constructor(t){f(this,"instance"),f(this,"baseConfig",{baseURL:m,timeout:Number(E)}),this.instance=x().create(Object.assign(this.baseConfig,t)),this.instance.interceptors.request.use(s=>(s.headers=s.headers||{},s.headers.Authorization=C.Z.getAccessToken("ywkf_jwt")||"",s),s=>Promise.reject(s)),this.instance.interceptors.response.use(s=>{const{data:c}=s,{code:O,message:A}=c;return O===1?(v.Z.error({message:A||"\u672A\u77E5\u9519\u8BEF"}),Promise.reject(c)):O===999?(v.Z.error({message:A||"\u767B\u5F55\u8FC7\u671F, \u8BF7\u91CD\u65B0\u767B\u5F55"}),Promise.reject(c)):O!==0?(v.Z.error({message:A||"\u672A\u5B9A\u4E49\u9519\u8BEF"}),Promise.reject(c)):(O===0&&A&&v.Z.success({message:A}),s.data)},s=>{let c="";switch(s.response.status){case 400:c="\u8BF7\u6C42\u9519\u8BEF(400)";break;case 401:c="\u672A\u6388\u6743\uFF0C\u8BF7\u91CD\u65B0\u767B\u5F55(401)";break;case 403:c="\u62D2\u7EDD\u8BBF\u95EE(403)";break;case 404:c="\u8BF7\u6C42\u51FA\u9519(404)";break;case 408:c="\u8BF7\u6C42\u8D85\u65F6(408)";break;case 500:c="\u670D\u52A1\u5668\u9519\u8BEF(500)";break;case 501:c="\u670D\u52A1\u672A\u5B9E\u73B0(501)";break;case 502:c="\u7F51\u7EDC\u9519\u8BEF(502)";break;case 503:c="\u670D\u52A1\u4E0D\u53EF\u7528(503)";break;case 504:c="\u7F51\u7EDC\u8D85\u65F6(504)";break;case 505:c="HTTP\u7248\u672C\u4E0D\u53D7\u652F\u6301(505)";break;default:c=`\u8FDE\u63A5\u51FA\u9519(${s.response.status})!`}return Promise.reject(s.response)})}request(t){return this.instance.request(t)}get(t,s){return this.instance.get(t,s)}post(t,s,c){return this.instance.post(t,s,c)}put(t,s,c){return this.instance.put(t,s,c)}delete(t,s){return this.instance.delete(t,s)}}var U=new T({})},5340:function(q,j,_){_.d(j,{Z:function(){return T}});var r=_(959),x=_(4514),v=_(1516),C=_(2430),k={"micro-container":"src-components-ManualSlave-ManualSlavePage__micro-container--vMQ_R"},P=_(2681),f=(U,h,t)=>new Promise((s,c)=>{var O=i=>{try{a(t.next(i))}catch(n){c(n)}},A=i=>{try{a(t.throw(i))}catch(n){c(n)}},a=i=>i.done?s(i.value):Promise.resolve(i.value).then(O,A);a((t=t.apply(U,h)).next())});let m;var T=()=>{var U,h,t;const{route:s}=(0,x.Q)();let c=`manual_${s.microApp}`,O=`/${s.microApp}`;const{microActiveApps:A}=(0,v.Z)(),a=n=>f(void 0,[n],function*({route:p}){m=yield C.ZP.loadApp(p.microApp,{cache:!0,basename:O,entry:p.entry,domGetter:`#${c}`}),yield m?.mount()});(0,r.useEffect)(()=>(s.microApp&&a({route:s}),()=>{m.unmount()}),[]);let i=A.findIndex(n=>n.loading);return console.log(A),r.createElement(r.Fragment,null,r.createElement("div",{id:c,className:`h-full ${k["micro-container"]}`}),i!==-1?r.createElement(P.Z,{name:(t=(h=(U=A[i])==null?void 0:U.props)==null?void 0:h.cname)!=null?t:""}):void 0)}},2420:function(q,j,_){_.d(j,{Z:function(){return ne}});var r=_(959),x=_(5034),v=_(1516),C=_(4875),k=_.n(C),P=_(9148);function f(e,o,l){var d=l||{},b=d.noTrailing,I=b===void 0?!1:b,L=d.noLeading,H=L===void 0?!1:L,V=d.debounceMode,M=V===void 0?void 0:V,w,z=!1,X=0;function g(){w&&clearTimeout(w)}function y(K){var R=K||{},F=R.upcomingOnly,W=F===void 0?!1:F;g(),z=!W}function $(){for(var K=arguments.length,R=new Array(K),F=0;F<K;F++)R[F]=arguments[F];var W=this,Y=Date.now()-X;if(z)return;function Z(){X=Date.now(),o.apply(W,R)}function J(){w=void 0}!H&&M&&!w&&Z(),g(),M===void 0&&Y>e?H?(X=Date.now(),I||(w=setTimeout(M?J:Z,e))):Z():I!==!0&&(w=setTimeout(M?J:Z,M===void 0?e-Y:e))}return $.cancel=y,$}function m(e,o,l){var d=l||{},b=d.atBegin,I=b===void 0?!1:b;return f(e,o,{debounceMode:I!==!1})}var E=_(6378),T=_(4744),U=_(721),h=_(4870),t=_(5036),s=_(8528);const c=new U.E4("antSpinMove",{to:{opacity:1}}),O=new U.E4("antRotate",{to:{transform:"rotate(405deg)"}}),A=e=>({[`${e.componentCls}`]:Object.assign(Object.assign({},(0,h.Wf)(e)),{position:"absolute",display:"none",color:e.colorPrimary,fontSize:0,textAlign:"center",verticalAlign:"middle",opacity:0,transition:`transform ${e.motionDurationSlow} ${e.motionEaseInOutCirc}`,"&-spinning":{position:"static",display:"inline-block",opacity:1},"&-nested-loading":{position:"relative",[`> div > ${e.componentCls}`]:{position:"absolute",top:0,insetInlineStart:0,zIndex:4,display:"block",width:"100%",height:"100%",maxHeight:e.contentHeight,[`${e.componentCls}-dot`]:{position:"absolute",top:"50%",insetInlineStart:"50%",margin:-e.spinDotSize/2},[`${e.componentCls}-text`]:{position:"absolute",top:"50%",width:"100%",paddingTop:(e.spinDotSize-e.fontSize)/2+2,textShadow:`0 1px 2px ${e.colorBgContainer}`,fontSize:e.fontSize},[`&${e.componentCls}-show-text ${e.componentCls}-dot`]:{marginTop:-(e.spinDotSize/2)-10},"&-sm":{[`${e.componentCls}-dot`]:{margin:-e.spinDotSizeSM/2},[`${e.componentCls}-text`]:{paddingTop:(e.spinDotSizeSM-e.fontSize)/2+2},[`&${e.componentCls}-show-text ${e.componentCls}-dot`]:{marginTop:-(e.spinDotSizeSM/2)-10}},"&-lg":{[`${e.componentCls}-dot`]:{margin:-(e.spinDotSizeLG/2)},[`${e.componentCls}-text`]:{paddingTop:(e.spinDotSizeLG-e.fontSize)/2+2},[`&${e.componentCls}-show-text ${e.componentCls}-dot`]:{marginTop:-(e.spinDotSizeLG/2)-10}}},[`${e.componentCls}-container`]:{position:"relative",transition:`opacity ${e.motionDurationSlow}`,"&::after":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,zIndex:10,width:"100%",height:"100%",background:e.colorBgContainer,opacity:0,transition:`all ${e.motionDurationSlow}`,content:'""',pointerEvents:"none"}},[`${e.componentCls}-blur`]:{clear:"both",opacity:.5,userSelect:"none",pointerEvents:"none","&::after":{opacity:.4,pointerEvents:"auto"}}},"&-tip":{color:e.spinDotDefault},[`${e.componentCls}-dot`]:{position:"relative",display:"inline-block",fontSize:e.spinDotSize,width:"1em",height:"1em","&-item":{position:"absolute",display:"block",width:(e.spinDotSize-e.marginXXS/2)/2,height:(e.spinDotSize-e.marginXXS/2)/2,backgroundColor:e.colorPrimary,borderRadius:"100%",transform:"scale(0.75)",transformOrigin:"50% 50%",opacity:.3,animationName:c,animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"alternate","&:nth-child(1)":{top:0,insetInlineStart:0},"&:nth-child(2)":{top:0,insetInlineEnd:0,animationDelay:"0.4s"},"&:nth-child(3)":{insetInlineEnd:0,bottom:0,animationDelay:"0.8s"},"&:nth-child(4)":{bottom:0,insetInlineStart:0,animationDelay:"1.2s"}},"&-spin":{transform:"rotate(45deg)",animationName:O,animationDuration:"1.2s",animationIterationCount:"infinite",animationTimingFunction:"linear"}},[`&-sm ${e.componentCls}-dot`]:{fontSize:e.spinDotSizeSM,i:{width:(e.spinDotSizeSM-e.marginXXS/2)/2,height:(e.spinDotSizeSM-e.marginXXS/2)/2}},[`&-lg ${e.componentCls}-dot`]:{fontSize:e.spinDotSizeLG,i:{width:(e.spinDotSizeLG-e.marginXXS)/2,height:(e.spinDotSizeLG-e.marginXXS)/2}},[`&${e.componentCls}-show-text ${e.componentCls}-text`]:{display:"block"}})});var a=(0,t.Z)("Spin",e=>{const o=(0,s.TS)(e,{spinDotDefault:e.colorTextDescription,spinDotSize:e.controlHeightLG/2,spinDotSizeSM:e.controlHeightLG*.35,spinDotSizeLG:e.controlHeight});return[A(o)]},{contentHeight:400}),i=function(e,o){var l={};for(var d in e)Object.prototype.hasOwnProperty.call(e,d)&&o.indexOf(d)<0&&(l[d]=e[d]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var b=0,d=Object.getOwnPropertySymbols(e);b<d.length;b++)o.indexOf(d[b])<0&&Object.prototype.propertyIsEnumerable.call(e,d[b])&&(l[d[b]]=e[d[b]]);return l};const n=null;let p=null;function u(e,o){const{indicator:l}=o,d=`${e}-dot`;return l===null?null:(0,E.l$)(l)?(0,E.Tm)(l,{className:k()(l.props.className,d)}):(0,E.l$)(p)?(0,E.Tm)(p,{className:k()(p.props.className,d)}):r.createElement("span",{className:k()(d,`${e}-dot-spin`)},r.createElement("i",{className:`${e}-dot-item`,key:1}),r.createElement("i",{className:`${e}-dot-item`,key:2}),r.createElement("i",{className:`${e}-dot-item`,key:3}),r.createElement("i",{className:`${e}-dot-item`,key:4}))}function S(e,o){return!!e&&!!o&&!isNaN(Number(o))}const G=e=>{const{spinPrefixCls:o,spinning:l=!0,delay:d=0,className:b,rootClassName:I,size:L="default",tip:H,wrapperClassName:V,style:M,children:w,hashId:z}=e,X=i(e,["spinPrefixCls","spinning","delay","className","rootClassName","size","tip","wrapperClassName","style","children","hashId"]),[g,y]=r.useState(()=>l&&!S(l,d));r.useEffect(()=>{if(l){const Q=m(d,()=>{y(!0)});return Q(),()=>{var ee;(ee=Q?.cancel)===null||ee===void 0||ee.call(Q)}}y(!1)},[d,l]);const $=r.useMemo(()=>typeof w<"u",[w]),{direction:K,spin:R}=r.useContext(T.E_),F=k()(o,R?.className,{[`${o}-sm`]:L==="small",[`${o}-lg`]:L==="large",[`${o}-spinning`]:g,[`${o}-show-text`]:!!H,[`${o}-rtl`]:K==="rtl"},b,I,z),W=k()(`${o}-container`,{[`${o}-blur`]:g}),Y=(0,P.Z)(X,["indicator","prefixCls"]),Z=Object.assign(Object.assign({},R?.style),M),J=r.createElement("div",Object.assign({},Y,{style:Z,className:F,"aria-live":"polite","aria-busy":g}),u(o,e),H&&$?r.createElement("div",{className:`${o}-text`},H):null);return $?r.createElement("div",Object.assign({},Y,{className:k()(`${o}-nested-loading`,V,z)}),g&&r.createElement("div",{key:"loading"},J),r.createElement("div",{className:W,key:"container"},w)):J},N=e=>{const{prefixCls:o}=e,{getPrefixCls:l}=r.useContext(T.E_),d=l("spin",o),[b,I]=a(d),L=Object.assign(Object.assign({},e),{spinPrefixCls:d,hashId:I});return b(r.createElement(G,Object.assign({},L)))};N.setDefaultIndicator=e=>{p=e};var D=N,B=_(6685),ne=(e,o)=>()=>{let l=(0,x.s0)(),d,b;o&&(d=o.targetPerarr,b=o.autoRedirect);const[I,L]=(0,r.useState)(void 0),H=(0,v.Z)(g=>g.getBasicInfo),V=(0,v.Z)(g=>g.navCode),M=(0,v.Z)(g=>g.currentUser),w=(0,v.Z)(g=>g.modules);(0,r.useEffect)(()=>{H({}).then(g=>{L(!0)})},[]);const z=(0,r.useCallback)(()=>{if(B.Z.isEmpty(V)&&B.Z.isEmpty(M)&&B.Z.isEmpty(w)){l("/auth",{replace:!0});return}if(o?.targetPerarr){if(V.find(y=>o.targetPerarr===y))return r.createElement(e,null);l("/unAuth",{replace:!0});return}return o?.autoRedirect&&V.forEach(g=>{const y=w.find($=>$.perarr===g);if(y&&y.defaultroute){l(`/${y.path}${y.defaultroute}`,{replace:!0});return}if(y&&y.path){l(`/${y.path}`,{replace:!0});return}}),r.createElement(e,null)},[V,M,w]);return(()=>{if(I===void 0)return r.createElement(D,{spinning:!0},"\u52A0\u8F7D\u4E2D...");if(I)return z()})()}},1516:function(q,j,_){_.d(j,{Z:function(){return A}});var r=_(6497),x=_(6592);const v=new x.c({});function C(a){return v.get("/main/gateway/copyright",a)}function k(a){return v.get("/main/gateway/profile",a)}function P(a){return v.get("/main/gateway/perarr",a)}function f(a){return v.get("/main/gateway/module",a)}var m=_(6685),E=Object.defineProperty,T=Object.getOwnPropertySymbols,U=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,t=(a,i,n)=>i in a?E(a,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[i]=n,s=(a,i)=>{for(var n in i||(i={}))U.call(i,n)&&t(a,n,i[n]);if(T)for(var n of T(i))h.call(i,n)&&t(a,n,i[n]);return a},c=(a,i,n)=>new Promise((p,u)=>{var S=D=>{try{N(n.next(D))}catch(B){u(B)}},G=D=>{try{N(n.throw(D))}catch(B){u(B)}},N=D=>D.done?p(D.value):Promise.resolve(D.value).then(S,G);N((n=n.apply(a,i)).next())}),A=(0,r.Ue)()((a,i)=>({year:{s:"0",e:"0"},currentUser:{},navCode:[],microActiveApps:[],siderRoutes:{},getYearData:n=>c(void 0,null,function*(){const{data:p}=yield C(n);a({year:p.year})}),syncGetCurrentUser:n=>{k(n).then(p=>{const{data:u}=p;a({currentUser:u?.user})})},getCurrentUser:n=>c(void 0,null,function*(){const{data:p}=yield k({});return a({currentUser:p?.user}),{currentUser:p?.user}}),syncGetNav:n=>{P(n).then(p=>{const{data:u}=p;a({navCode:u})})},getNav:n=>c(void 0,null,function*(){const{data:p}=yield P(n);return a({navCode:p}),{navCode:p}}),modules:[],syncGetModule:n=>{f(n).then(p=>{const{data:u}=p;a({modules:u})})},getModule:n=>c(void 0,null,function*(){const{data:p}=yield f(n);return a({modules:p}),{modules:p}}),getBasicInfo:n=>c(void 0,null,function*(){try{const p=i().getCurrentUser,u=yield p(n),S=i().getNav,G=yield S(n),N=i().getModule,D=yield N(n);return s(s(s({},u),G),D)}catch(p){return console.log(p),{currentUser:"",navCode:[],modules:[]}}}),layout:{renderFooter:!1,renderHeader:!0,renderSider:!0},setLayout:n=>{const p=i().layout;a({layout:s(s({},p),n)})},setMicroActiveApps:n=>{const{action:p,appInfo:u}=n,S=m.Z.cloneDeep(i().microActiveApps);switch(p){case"add":if(S.find(D=>D.id===u.id))return;S.push(u),a({microActiveApps:S});return;case"delete":const G=S.findIndex(D=>D.id===u.id);if(G===-1)return;S.splice(G,1),a({microActiveApps:S});return;case"update":const N=S.findIndex(D=>D.id===u.id);if(N===-1)return;S[N]=u,a({microActiveApps:S});return}},setSiderRoutes:n=>{const p=i().siderRoutes;a({siderRoutes:s(s({},p),n)})}}))}}]);
